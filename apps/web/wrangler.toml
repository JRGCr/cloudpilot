name = "cloudpilot-web"
compatibility_date = "2024-01-01"
compatibility_flags = ["nodejs_compat"]
pages_build_output_dir = "dist"

# D1 Database binding for Pages Functions
[[d1_databases]]
binding = "DB"
database_name = "cloudpilot"
database_id = "local"
migrations_dir = "../../migrations"

# Preview environment
[env.preview]
[[env.preview.d1_databases]]
binding = "DB"
database_name = "cloudpilot"
database_id = "local"
migrations_dir = "../../migrations"

# Production environment
[env.production]
[[env.production.d1_databases]]
binding = "DB"
database_name = "cloudpilot"
database_id = "74e356ad-42c2-4806-b2b7-c7f4850261a2"
migrations_dir = "../../migrations"

# Note: Secrets (BETTER_AUTH_SECRET, GITHUB_CLIENT_ID, GITHUB_CLIENT_SECRET)
# are set via wrangler CLI or Cloudflare dashboard
# Non-secret env vars can be set here as defaults
[env.production.vars]
NODE_ENV = "production"
BETTER_AUTH_URL = "https://cloudpilot-web.pages.dev/api/auth"
